{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "openpersona/soul/persona",
  "title": "Persona",
  "description": "Soul layer - Pure persona definition (who you are)",
  "type": "object",
  "required": ["personaName", "slug", "bio", "personality", "speakingStyle"],
  "properties": {
    "personaName": { "type": "string", "description": "Display name" },
    "slug": { "type": "string", "pattern": "^[a-z0-9-]+$", "description": "Identifier for directory and registry" },
    "personaType": { "type": "string", "description": "DEPRECATED â€” use 'role' instead. Kept for backward compatibility." },
    "role": {
      "type": "string",
      "default": "companion",
      "description": "Relationship role â€” what this persona is to the user. Common values: companion, assistant, character, brand, pet, mentor, therapist, coach, collaborator, guardian, entertainer, narrator. Custom values are welcome."
    },
    "sourceIdentity": {
      "type": "object",
      "description": "If present, this persona mirrors a real-world entity (digital twin). Null/absent for original personas.",
      "properties": {
        "name": { "type": "string", "description": "Name of the source entity" },
        "kind": { "type": "string", "description": "Entity kind (person, animal, character, brand, historical-figure, organism, etc.)" },
        "relationship": { "type": "string", "description": "Relationship of the creator to the source (creator, owner, estate, licensee, etc.)" },
        "consentType": { "type": "string", "description": "Authorization basis (self-granted, owner-granted, estate-granted, public-domain, licensed, etc.)" },
        "consentGrantedBy": { "type": "string", "description": "Who granted consent" },
        "syncStrategy": { "type": "string", "enum": ["static", "manual", "periodic"], "default": "static", "description": "How the persona stays in sync with the source entity" }
      },
      "required": ["name", "kind"]
    },
    "bio": { "type": "string", "description": "One-line bio" },
    "personality": { "type": "string", "description": "Personality keywords" },
    "speakingStyle": { "type": "string", "description": "Speaking style" },
    "creature": { "type": "string", "default": "AI companion", "description": "Creature type for IDENTITY.md" },
    "emoji": { "type": "string", "default": "ðŸ¤–", "description": "Representative emoji for IDENTITY.md" },
    "background": { "type": "string", "description": "Background story" },
    "age": { "type": "string", "description": "Age setting" },
    "vibe": { "type": "string", "description": "Overall vibe/tone" },
    "boundaries": { "type": "string", "description": "Behavioral boundaries" },
    "referenceImage": { "type": "string", "description": "Reference image URL for visual identity" },
    "capabilities": { "type": "array", "items": { "type": "string" }, "description": "Capability descriptions" },
    "behaviorGuide": { "type": "string", "description": "Domain-specific behavior instructions (markdown, included in generated SKILL.md)" },
    "evolution": {
      "type": "object",
      "description": "â˜…Experimental: Dynamic persona evolution config",
      "properties": {
        "enabled": { "type": "boolean", "default": false },
        "relationshipProgression": { "type": "boolean", "default": true },
        "moodTracking": { "type": "boolean", "default": true },
        "traitEmergence": { "type": "boolean", "default": true },
        "speakingStyleDrift": { "type": "boolean", "default": true },
        "interestDiscovery": { "type": "boolean", "default": true },
        "boundaries": {
          "type": "object",
          "description": "Hard constraints that evolution must never violate",
          "properties": {
            "immutableTraits": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Traits that cannot be overridden by evolution"
            },
            "maxFormality": { "type": "number", "minimum": 1, "maximum": 10, "description": "Formality ceiling (1-10)" },
            "minFormality": { "type": "number", "minimum": 1, "maximum": 10, "description": "Formality floor (1-10)" }
          },
          "additionalProperties": false
        },
        "stageBehaviors": {
          "type": "object",
          "description": "Custom behavior descriptions per relationship stage, overriding defaults",
          "propertyNames": {
            "enum": ["stranger", "acquaintance", "friend", "close_friend", "intimate"]
          },
          "additionalProperties": { "type": "string" }
        }
      }
    }
  }
}
